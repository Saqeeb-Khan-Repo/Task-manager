import{u as C,r,j as e}from"./index-DSUiDpyP.js";/* empty css             */import{a as m}from"./index-B9ygI19o.js";const D=()=>{const{tasks:x,setTasks:n}=C(),[l,j]=r.useState(""),[i,f]=r.useState("all"),[N,p]=r.useState(!0),[v,k]=r.useState(new Set),[c,u]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const t=await m.get("https://task-backend-sgnw.onrender.com/tasks");n(t.data),p(!1)}catch(t){console.error("Failed to fetch tasks:",t),p(!1)}})()},[n]),r.useEffect(()=>{if(!c)return;const s=setTimeout(()=>{u(!1)},2e3);return()=>clearTimeout(s)},[c]);const w=async(s,t)=>{k(a=>new Set([...a,s]));try{const a=await m.put(`https://task-backend-sgnw.onrender.com/tasks/${s}/toggle`,{isCompleted:!t});n(o=>o.map(g=>g._id===s?a.data:g)),t||u(!0)}catch(a){console.error("Failed to update task:",a)}finally{k(a=>{const o=new Set(a);return o.delete(s),o})}},y=async s=>{try{await m.delete(`https://task-backend-sgnw.onrender.com/tasks/${s}`),n(t=>t.filter(a=>a._id!==s)),console.log(`Deleted task: ${s}`)}catch(t){console.error("Delete failed:",t)}},d=x.filter(s=>!s.isCompleted),h=d.filter(s=>{const t=s.taskName.toLowerCase().includes(l.toLowerCase())||s.taskDescription?.toLowerCase().includes(l.toLowerCase()),a=i==="all"||s.priority.toLowerCase()===i.toLowerCase();return t&&a});return N?e.jsx("div",{className:"task",children:e.jsx("div",{className:"task-container",children:e.jsx("p",{children:"Loading tasks..."})})}):e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{className:"popup",children:"Task Completed âœ…"}),e.jsx("div",{className:"task",children:e.jsxs("div",{className:"task-container",children:[e.jsxs("div",{className:"task-header-section",children:[e.jsx("h2",{className:"task-header",children:"Your Tasks"}),e.jsxs("span",{className:"task-count",children:[h.length," of ",d.length," pending tasks"]})]}),e.jsxs("div",{className:"task-filters",children:[e.jsx("input",{type:"text",className:"task-search",placeholder:"Search tasks...",value:l,onChange:s=>j(s.target.value)}),e.jsxs("select",{className:"task-select",value:i,onChange:s=>f(s.target.value),children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),h.length===0?e.jsx("p",{className:"task-empty",children:d.length===0?"No pending tasks! ðŸŽ‰ Check completed tasks.":"No pending tasks match your filters."}):e.jsx("div",{className:"items-grid",children:h.map(s=>{const t=s._id||s.id,a=v.has(t);return e.jsxs("div",{className:"item",children:[e.jsxs("div",{className:"task-header-content",children:[e.jsxs("div",{className:"task-info",children:[e.jsx("h3",{className:"task-title",children:s.taskName}),e.jsx("p",{className:"task-subtitle",children:s.taskDescription})]}),e.jsx("div",{className:"task-actions",children:e.jsx("span",{className:`priority-badge priority-${s.priority.toLowerCase()}`,children:s.priority})})]}),e.jsxs("div",{className:"task-footer",children:[e.jsxs("span",{className:"task-date",children:["ðŸ“… Due: ",new Date(s.dueDate).toLocaleDateString()]}),e.jsxs("div",{className:"task-actions-footer",children:[e.jsx("button",{className:`complete-btn ${a?"loading":""}`,onClick:()=>w(t,s.isCompleted||!1),disabled:a,children:a?"â³ Saving...":"Complete"}),e.jsx("button",{className:"delete",onClick:()=>y(t),children:"Delete"})]})]})]},t)})})]})})]})};export{D as default};
