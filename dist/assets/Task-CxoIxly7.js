import{u as D,r as l,j as s}from"./index-D95h7229.js";/* empty css             */import{a as p}from"./index-B9ygI19o.js";const k=void 0,F=()=>{const{tasks:x,setTasks:i}=D(),[n,N]=l.useState(""),[o,v]=l.useState("all"),[w,y]=l.useState(!0),[T,g]=l.useState(new Set),[h,f]=l.useState(!1),[u,j]=l.useState(!1);l.useEffect(()=>{let e=!0;return(async()=>{try{const{data:t}=await p.get(`${k}/tasks`);e&&i(t)}catch(t){console.error("Failed to fetch tasks:",t)}finally{e&&y(!1)}})(),()=>{e=!1}},[i]),l.useEffect(()=>{if(!h&&!u)return;const e=setTimeout(()=>{f(!1),j(!1)},2e3);return()=>clearTimeout(e)},[h,u]);const S=async(e,a)=>{g(t=>new Set(t).add(e));try{const{data:t}=await p.put(`${k}/tasks/${e}/toggle`,{isCompleted:!a});i(r=>r.map(d=>d._id===e?t:d)),a||f(!0)}catch(t){console.error("Failed to toggle task:",t)}finally{g(t=>{const r=new Set(t);return r.delete(e),r})}},C=async e=>{try{await p.delete(`${k}/tasks/${e}`),i(a=>a.filter(t=>t._id!==e)),j(!0)}catch(a){console.error("Delete failed:",a)}},c=l.useMemo(()=>x.filter(e=>!e?.isCompleted),[x]),m=l.useMemo(()=>c.filter(e=>{const a=e?.taskName?.toLowerCase()||"",t=e?.taskDescription?.toLowerCase()||"",r=a.includes(n.toLowerCase())||t.includes(n.toLowerCase()),d=o==="all"||e?.priority?.toLowerCase()===o;return r&&d}),[c,n,o]);return w?s.jsx("div",{className:"task",children:s.jsx("div",{className:"task-container",children:s.jsx("p",{children:"Loading tasks..."})})}):s.jsxs(s.Fragment,{children:[h&&s.jsx("div",{className:"popUp",children:"Task completed âœ…"}),u&&s.jsx("div",{className:"popUp",children:"Task deleted ðŸ—‘ï¸"}),s.jsx("div",{className:"task",children:s.jsxs("div",{className:"task-container",children:[s.jsxs("div",{className:"task-header-section",children:[s.jsx("h2",{className:"task-header",children:"Your Tasks"}),s.jsxs("span",{className:"task-count",children:[m.length," of ",c.length," pending"]})]}),s.jsxs("div",{className:"task-filters",children:[s.jsx("input",{type:"text",className:"task-search",placeholder:"Search tasks...",value:n,onChange:e=>N(e.target.value)}),s.jsxs("select",{className:"task-select",value:o,onChange:e=>v(e.target.value),children:[s.jsx("option",{value:"all",children:"All Priorities"}),s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"})]})]}),m.length===0?s.jsx("p",{className:"task-empty",children:c.length===0?"No pending tasks ðŸŽ‰":"No tasks match your filters"}):s.jsx("div",{className:"items-grid",children:m.map(e=>{const a=e._id,t=T.has(a);return s.jsxs("div",{className:"item",children:[s.jsxs("div",{className:"task-header-content",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"task-title",children:e.taskName}),e.taskDescription&&s.jsx("p",{className:"task-subtitle",children:e.taskDescription})]}),s.jsx("span",{className:`priority-badge priority-${e.priority.toLowerCase()}`,children:e.priority})]}),s.jsxs("div",{className:"task-footer",children:[s.jsxs("span",{className:"task-date",children:["ðŸ“… Due: ",new Date(e.dueDate).toLocaleDateString()]}),s.jsxs("div",{className:"task-actions-footer",children:[s.jsx("button",{className:`complete-btn ${t?"loading":""}`,disabled:t,onClick:()=>S(a,e.isCompleted),children:t?"Savingâ€¦":"Complete"}),s.jsx("button",{className:"delete",onClick:()=>C(a),children:"Delete"})]})]})]},a)})})]})})]})};export{F as default};
