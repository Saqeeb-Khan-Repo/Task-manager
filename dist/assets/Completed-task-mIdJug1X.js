import{r as t,j as e}from"./index-D3vIhNd0.js";/* empty css             */import{a as N}from"./index-B9ygI19o.js";const f="https://task-backend-sgnw.onrender.com/tasks/completed",C=()=>{const[r,p]=t.useState(""),[l,k]=t.useState("all"),[u,d]=t.useState(!0),[o,x]=t.useState([]),[m,j]=t.useState("");t.useEffect(()=>{let s=!0;return(async()=>{try{d(!0);const{data:a}=await N.get(`${f}/tasks/completed`);if(!Array.isArray(a))throw new Error("Invalid response format");const i=a.filter(n=>n?.isCompleted===!0);s&&x(i)}catch(a){console.error("Failed to fetch completed tasks:",a),s&&j("Failed to load completed tasks.")}finally{s&&d(!1)}})(),()=>{s=!1}},[]);const c=t.useMemo(()=>o.filter(s=>{const h=s?.taskName?.toLowerCase()||"",a=s?.taskDescription?.toLowerCase()||"",i=h.includes(r.toLowerCase())||a.includes(r.toLowerCase()),n=l==="all"||s?.priority?.toLowerCase()===l;return i&&n}),[o,r,l]);return u?e.jsx("div",{className:"task",children:e.jsx("div",{className:"task-container",children:e.jsx("p",{children:"Loading completed tasks..."})})}):m?e.jsx("div",{className:"task",children:e.jsx("div",{className:"task-container",children:e.jsx("p",{className:"task-error",children:m})})}):e.jsx("div",{className:"task",children:e.jsxs("div",{className:"task-container",children:[e.jsxs("div",{className:"task-header-section",children:[e.jsx("h2",{className:"task-header",children:"Completed Tasks"}),e.jsxs("span",{className:"task-count",children:[c.length," of ",o.length," completed"]})]}),e.jsxs("div",{className:"task-filters",children:[e.jsx("input",{type:"text",className:"task-search",placeholder:"Search completed tasks...",value:r,onChange:s=>p(s.target.value)}),e.jsxs("select",{className:"task-select",value:l,onChange:s=>k(s.target.value),children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]}),c.length===0?e.jsx("p",{className:"task-empty",children:o.length===0?"No completed tasks yet. Complete some tasks first!":"No completed tasks match your filters."}):e.jsx("div",{className:"items-grid",children:c.map(s=>e.jsxs("div",{className:"item completed",children:[e.jsxs("div",{className:"task-header-content",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"task-title completed",children:s.taskName}),s.taskDescription&&e.jsx("p",{className:"task-subtitle",children:s.taskDescription})]}),e.jsx("span",{className:`priority-badge priority-${s.priority?.toLowerCase()}`,children:s.priority}),e.jsx("input",{type:"checkbox",className:"checkbox",checked:!0,disabled:!0})]}),e.jsx("div",{className:"task-footer",children:e.jsxs("span",{className:"task-date",children:["âœ… Completed on:"," ",new Date(s.updatedAt||s.completedAt||Date.now()).toLocaleDateString()]})})]},s._id))})]})})};export{C as default};
